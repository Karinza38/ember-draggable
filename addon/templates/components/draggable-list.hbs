<div class="draggable-list" ...attributes>
  {{#if isGroupedList}}
    {{#each-in @items as |groupName groupItems|}}
      {{yield (hash
        group=(component 'draggable-list/content' content=groupName)
      )}}
      <DropTarget
        @isActive={{and (eq dropTarget -1) (eq groupTarget groupName)}}
      />
      {{#each groupItems as |itemData index|}}
        {{#draggable-list/item
          index=index
          events=events
          activeIndex=activeIndex
          group=groupName
          activeGroup=activeGroup
        }}
          {{yield (hash
            item=(component 'draggable-list/content' content=itemData)
          )}}
        {{/draggable-list/item}}
        <DropTarget
          @isActive={{and (eq dropTarget index) (eq groupTarget groupName)}}
        />
      {{else}}
        {{#draggable-list/item
          index=0
          events=events
          activeIndex=activeIndex
          group=groupName
          activeGroup=activeGroup
          inactive=true
        }}
        {{yield (hash
          placeholder=(component 'draggable-list/content')
        )}}
        {{/draggable-list/item}}
      {{/each}}
    {{/each-in}}
    {{#if (not (is-empty activeIndex))}}
      <div
        class="draggable-list-item active"
        style={{style}} {{! template-lint-disable no-inline-styles }}
      >
        {{yield (hash
          item=(component 'draggable-list/content' content=(get (get items activeGroup) activeIndex))
        )}}
      </div>
    {{/if}}
  {{else}}
    {{#each @items as |itemData index|}}
      {{#if (eq index 0)}}
        <DropTarget
          @isActive={{eq dropTarget -1}}
        />
      {{/if}}
      {{#draggable-list/item
        index=index
        events=events
        activeIndex=activeIndex
      }}
        {{yield (hash
          item=(component 'draggable-list/content' content=itemData)
        )}}
      {{/draggable-list/item}}
      <DropTarget
        @isActive={{eq dropTarget index}}
      />
    {{/each}}
    {{#if (not (is-empty activeIndex))}}
      <div
        class="draggable-list-item active"
        style={{style}} {{! template-lint-disable no-inline-styles }}
      >

        {{yield (hash
          item=(component 'draggable-list/content' content=(get items activeIndex))
        )}}
      </div>
    {{/if}}
  {{/if}}
</div>